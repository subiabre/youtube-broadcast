<html>
    <head>
        <title>APIO Stream</title>
        <meta name="viewport" content="width=device-width, user-scalable=no">
        <link rel="stylesheet" href="style.css">
    </head>
    <body>
        <iframe
            id="player"
            width="100%"
            height="100%"
            src="https://www.youtube.com/embed/FH6wpO66J4k?autoplay=1"
            frameborder="0"
            encrypted-media
            allowfullscreen
            hidden
            >
        </iframe>

        <div id="apio">
            <h1>APIO</h1>
            <p>Send a video using the <code>/send</code> page to start watching.</p>
        </div>

        <script src="/socket.io/socket.io.js"></script>
        <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
        <script>
            $(function () {
                var socket = io();

                socket.on('streamUpdate', function(video){
                    let embed = `https://www.youtube.com/embed/${video.id}?autoplay=1`;

                    $('#apio').attr('hidden', true);
                    $('#player').removeAttr('hidden');
                    $('#player').attr('src', embed);
                });
            });
        </script>
    </body>
</html>